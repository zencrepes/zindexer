// Zencrepes configuration for that entity
const entity = 'githubRepositories';
const config = {
  id: entity,
  name: 'Repositories',
  platform: 'github',
  active: true,
  facets: [
    {
      facetType: 'date',
      field: 'createdAt',
      name: 'Created',
      nullValue: 'n/a',
      nullFilter: '',
      default: true,
    },
    {
      facetType: 'date',
      field: 'updatedAt',
      name: 'Updated',
      nullValue: 'n/a',
      nullFilter: '',
      default: true,
    },
    {
      facetType: 'date',
      field: 'pushedAt',
      name: 'Pushed',
      nullValue: 'n/a',
      nullFilter: '',
      default: true,
    },
    {
      facetType: 'term',
      field: 'owner.login',
      name: 'Organization',
      nullValue: 'n/a',
      nullFilter: '',
      default: true,
    },
    {
      facetType: 'term',
      field: 'codeOfConduct.name.keyword',
      name: 'Code of Conduct',
      nullValue: 'NONE',
      nullFilter:
        '{"op":"in","content":{"field":"codeOfConduct.name.keyword","value":["__missing__"]}}',
      default: true,
    },
    {
      facetType: 'term',
      field: 'defaultBranchRef.name.keyword',
      name: 'Default Branch',
      nullValue: 'NOT SET',
      nullFilter:
        '{"op":"in","content":{"field":"defaultBranchRef.name.keyword","value":["__missing__"]}}',
      default: true,
    },
    {
      facetType: 'term',
      field: 'branchProtectionRules.edges.node.pattern',
      name: 'Branch Protection',
      nullValue: 'NO PROTECTION',
      // Null Filter is a stringified object to be used when the user clicks on an _EMPTY_ bucket
      nullFilter:
        '{"op":"<=","content":{"field":"branchProtectionRules.totalCount","value":0}}',
      default: true,
    },
    {
      facetType: 'term',
      field: 'languages.edges.node.name.keyword',
      name: 'Languages',
      nullValue: 'NO LANGUAGE',
      // Null Filter is a stringified object to be used when the user clicks on an _EMPTY_ bucket
      nullFilter:
        '{"op":"<=","content":{"field":"languages.totalCount","value":0}}',
      default: true,
    },
    {
      facetType: 'term',
      field: 'repositoryTopics.edges.node.topic.name',
      name: 'Topics',
      nullValue: 'NO TOPICS',
      nullFilter:
        '{"op":"<=","content":{"field":"repositoryTopics.totalCount","value":0}}',
      default: true,
    },
    {
      facetType: 'term',
      field: 'licenseInfo.name.keyword',
      name: 'License',
      nullValue: 'NO LICENSE',
      nullFilter:
        '{"op":"in","content":{"field":"licenseInfo.name.keyword","value":["__missing__"]}}',
      default: true,
    },
    {
      facetType: 'boolean',
      field: 'isPrivate',
      name: 'Private',
      nullValue: 'EMPTY',
      nullFilter: '',
      default: true,
    },
    {
      facetType: 'boolean',
      field: 'isArchived',
      name: 'Archived',
      nullValue: 'EMPTY',
      nullFilter: '',
      default: true,
    },
    {
      facetType: 'boolean',
      field: 'isFork',
      name: 'Fork',
      nullValue: 'EMPTY',
      nullFilter: '',
      default: true,
    },
    {
      facetType: 'boolean',
      field: 'isTemplate',
      name: 'Template',
      nullValue: 'EMPTY',
      nullFilter: '',
      default: true,
    },
    {
      facetType: 'boolean',
      field: 'rebaseMergeAllowed',
      name: 'Rebase Merge',
      nullValue: 'EMPTY',
      nullFilter: '',
      default: true,
    },
    {
      facetType: 'boolean',
      field: 'branchProtectionRules.edges.node.requiresCommitSignatures',
      name: 'Signed Commit',
      nullValue: 'EMPTY',
      nullFilter: '',
      default: true,
    },
    {
      facetType: 'metrics',
      field: 'issues.totalCount',
      name: 'Issues',
      nullValue: 'EMPTY',
      default: false,
    },
    {
      facetType: 'metrics',
      field: 'pullRequests.totalCount',
      name: 'PRs',
      nullValue: 'EMPTY',
      default: false,
    },
    {
      facetType: 'metrics',
      field: 'releases.totalCount',
      name: 'Releases',
      nullValue: 'EMPTY',
      default: false,
    },
    {
      facetType: 'metrics',
      field: 'milestones.totalCount',
      name: 'Milestones',
      nullValue: 'EMPTY',
      default: false,
    },
    {
      facetType: 'metrics',
      field: 'projects.totalCount',
      name: 'Projects',
      nullValue: 'EMPTY',
      default: false,
    },
    {
      facetType: 'metrics',
      field: 'refs.totalCount',
      name: 'Commits',
      nullValue: 'EMPTY',
      default: false,
    },
    {
      facetType: 'metrics',
      field: 'vulnerabilityAlerts.totalCount',
      name: 'Vulnerabilities',
      nullValue: 'EMPTY',
      default: false,
    },
    {
      facetType: 'metrics',
      field: 'watchers.totalCount',
      name: 'Watchers',
      nullValue: 'EMPTY',
      default: false,
    },
    {
      facetType: 'metrics',
      field: 'stargazers.totalCount',
      name: 'Stargazers',
      nullValue: 'EMPTY',
      default: false,
    },
    {
      facetType: 'metrics',
      field: 'recentCommitsMaster.target.history.totalCount',
      name: 'Commits to Master',
      nullValue: 'EMPTY',
      default: false,
    },
  ],
  tableConfig: {
    itemsType: 'Github Repositories',
    defaultSortField: 'createdAt',
    columns: [
      {
        name: 'id',
        field: 'id',
        fieldType: 'string',
        sortField: 'id',
        sortable: false,
        default: false,
      },
      {
        name: 'Created At',
        field: 'createdAt',
        fieldType: 'date',
        sortField: 'createdAt',
        linkField: null,
        sortable: true,
        default: true,
      },
      {
        name: 'Org',
        field: 'owner.login',
        fieldType: 'string',
        sortField: 'owner.login',
        linkField: 'owner.url',
        sortable: true,
        default: true,
      },
      {
        name: 'Name',
        field: 'name',
        fieldType: 'string',
        sortField: 'name.keyword',
        linkField: 'url',
        sortable: true,
        default: true,
      },
      {
        name: 'Branches',
        field: 'refs.totalCount',
        sortField: 'refs.totalCount',
        linkField: null,
        sortable: true,
        default: true,
      },
      {
        name: 'Protection',
        field: 'branchProtectionRules.edges',
        subfield: 'node.pattern',
        fieldType: 'rowarray',        
        sortField: 'branchProtectionRules.totalCount',
        linkField: null,
        sortable: false,
        default: true,
      },      
      {
        name: 'Default',
        field: 'defaultBranchRef.name',
        fieldType: 'string',
        sortField: 'defaultBranchRef.name',
        linkField: null,
        sortable: true,
        default: true,
      },
      {
        name: 'Topics',
        field: 'repositoryTopics.edges',
        subfield: 'node.topic.name',
        fieldType: 'rowarray',
        sortField: 'repositoryTopics.edges.node.topic.name',
        linkField: null,
        sortable: false,
        default: true,
      },
      {
        name: 'PRs',
        field: 'pullRequests.totalCount',
        sortField: 'pullRequests.totalCount',
        linkField: null,
        sortable: true,
        default: true,
      },
      {
        name: 'Commits',
        field: 'recentCommitsMaster.target.history.totalCount',
        sortField: 'recentCommitsMaster.target.history.totalCount',
        linkField: null,
        sortable: true,
        default: true,
      },
      {
        name: 'Last 20 commits',
        fieldType: 'microchart',
        field: 'microchart',
        sortField: 'pullRequests.totalCount',
        linkField: null,
        sortable: false,
        default: true,
      },
      {
        name: 'Disk Usage',
        field: 'diskUsage',
        fieldType: 'bytes',
        sortField: 'diskUsage',
        linkField: null,
        sortable: true,
        default: true,
      },
      {
        name: 'Fork Count',
        field: 'forkCount',
        fieldType: 'string',
        sortField: 'forkCount',
        linkField: null,
        sortable: true,
        default: false,
      },
      {
        name: 'Issues Enabled',
        field: 'hasIssuesEnabled',
        fieldType: 'boolean',
        sortField: null,
        linkField: null,
        sortable: false,
        default: false,
      },
      {
        name: 'Projects Enabled',
        field: 'hasProjectsEnabled',
        fieldType: 'boolean',
        sortField: null,
        linkField: null,
        sortable: false,
        default: false,
      },
      {
        name: 'Wiki Enabled',
        field: 'hasWikiEnabled',
        fieldType: 'boolean',
        sortField: null,
        linkField: null,
        sortable: false,
        default: false,
      },
      {
        name: 'Is Archived',
        field: 'isArchived',
        fieldType: 'boolean',
        sortField: null,
        linkField: null,
        sortable: false,
        default: true,
      },
      {
        name: 'Is Private',
        field: 'isPrivate',
        fieldType: 'boolean',
        sortField: null,
        linkField: null,
        sortable: false,
        default: true,
      },
      {
        name: 'Primary Language',
        field: 'primaryLanguage.name',
        fieldType: 'string',
        sortField: 'primaryLanguage.name.keyword',
        linkField: null,
        sortable: false,
        default: false,
      },
      {
        name: 'Last Pushed At',
        field: 'pushedAt',
        fieldType: 'date',
        sortField: 'pushedAt',
        linkField: null,
        sortable: true,
        default: true,
      },
      {
        name: 'Commits to Master in Current Year (20 max)',
        field: 'currentYearMasterCommits',
        fieldType: 'string',
        sortField: 'currentYearMasterCommits',
        linkField: null,
        sortable: true,
        default: false,
      },
      {
        name: 'Url',
        field: 'url',
        fieldType: 'link',
        sortField: 'url',
        linkField: null,
        sortable: false,
        default: false,
      },
    ],
  },
};

export default config;
